<!DOCTYPE html>
<html>
<head>
	<title>MovieCo</title>
	<script   src="https://code.jquery.com/jquery-3.1.0.js"   integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="   crossorigin="anonymous"></script>
</head>
<body>

<div id="demo"><h2>Find user with most checkouts</h2></div>

<button type="button" onclick="maxUser">Click here to find top user </button>

<!-- <div id="demo1"><h2>See top month for movie checkouts</h2></div>

<button type="button" onclick=" ">Click here to find top month</button> -->

	 <script type="text/javascript">

	 // initUser();

	function initUser () {
		$.get("http://159.203.175.239:8080/checkouts.txt", getHighest);
	}

	// getHighest();

	function getHighest (data) {
		var users = cleanData (data, 0);
		var max = findMax (users);

		return document.getElementById("demo").innerHTML = maxUser;
	}

	function cleanData (data, num) {
		// setting up our data for use
		var c = getHighest(data).split("\n");
		var userArray = [];

		// making array of arrays ex. [[user], [user]]
		for(var i = 0; i < c.length; i++) {
			userArray.push(c[i].split(" ")[num]);
		}
		console.log(userArray);
		// return userArray;
	}

	findMax();

	function findMax (data) {
		//counting
		var user = {};
		var largest= 0;
		var userArray = [];

		for (var i=0; i < userArray.length; i++){
			var current = userArray[i];
			if (user[current] === undefined) {
			user[current] = 1;
			} else {
			user[current] ++;
			}
		}

		var max = 0;
		var maxUser;

		for (var j in user) {
			if (user[j] > max){
				max = user[j];
				maxUser = j;
			}
		}

		return maxUser;
	}

	 </script>
</body>
</html>